# Масштабирование

## Цели
- Стабильная работа при росте нагрузки.
- Минимальные простои при обновлениях.

## Горизонтальное масштабирование API
- Используйте HPA: `docs/k8s/api-hpa.yaml` или Helm `hpa.enabled`.
- Следите за `http_request_duration_ms` и `http_requests_total`.
- Рекомендуемые лимиты/requests задайте в `docs/helm/values.yaml`.

## Масштабирование RADIUS
- Увеличивайте количество реплик `radius-server`.
- Проверьте доступность UDP портов и балансировку.
- Следите за `radius_requests_total`.

## База данных
- Для HA PostgreSQL используйте оператор: `docs/k8s/postgres-cnpg.yaml`.
- Используйте резервное копирование и тесты восстановления.
- Следите за задержками и ошибками подключения.

## Redis
- Используйте PV и мониторинг ошибок (`redis_ping_total`).
- Планируйте размер памяти и eviction policy.

## Инфраструктура
- RollingUpdate + PDB для безостановочных релизов.
- Настройте ресурсы CPU/Memory.
- Проверяйте SLO/SLA алерты.
