# Rollback инструкции

## Когда откатывать
- Релиз вызывает деградацию SLA/SLO.
- Ошибки в критичных сценариях (логин, проверка кода, RADIUS).
- Падение готовности API/RADIUS.

## Kubernetes (манифесты)
- Переключить образ на предыдущий тег `vX.Y.Z`.
- Применить манифесты: `kubectl apply -f docs/k8s/`.
- Проверить: `kubectl rollout status deploy/api-server` и `radius-server`.

## Helm
- Посмотреть историю: `helm history <release>`.
- Откатить: `helm rollback <release> <revision>`.
- Проверить готовность подов и `/healthz`.

## Проверки после отката
- `GET /healthz` и ключевые API методы.
- Метрики: рост ошибок, `system_errors_total`.
- Логи: критичные ошибки.

## База данных
- Если применялись миграции: использовать обратные миграции при наличии.
- При критической ошибке данных — восстановление по `disaster-recovery.md`.

## Коммуникации
- Зафиксировать причину отката.
- Описать влияние и план исправления.
